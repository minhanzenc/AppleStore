function view(){
    if(localStorage.getItem('data')!=null){
        var data = JSON.parse(localStorage.getItem('data'));
        data.reverse();
        for(i=0;i<data.length;i++){
            var id = data[i].id;
            var name = data[i].name;
            var price = data[i].price;
            var image = data[i].image;
            var url = data[i].url;

            $('#row_wishlist').append('<div class="row col-md-4 item"><div class="col-md-12"><a type="button" data-id="'+id+'" name="delete_withlist" class="delete_withlist"><i class="fas fa-heart"></i></a></div><div class="col-md-6"><img width="100%" src="'+image+'"></div><div class="col-md-6 info_wishlist"><p>'+name+'</p><p style="color:#FE980F">'+price+'</p><p><a href="'+url+'">Xem sản phẩm</a></p></div></div>');

        }
    }
}
view();

function views(){
    if(localStorage.getItem('data')!=null){
        var data = JSON.parse(localStorage.getItem('data'));
        data.reverse();
        for(i=0;i<data.length;i++){

            $('#heart_wishlist').append('<a class="heart" type="button" id="{{$product->product_id}}" onclick="add_wistlist(this.id);"><i class="far fa-heart"></i></a>');

        }
    }else{
        $('#heart_wishlist').append('<a class="heart" type="button" id="{{$product->product_id}}" onclick="add_wistlist(this.id);"><i class="fas fa-heart"></i></a>');
    }
}
views();
// function views(){
//     if(localStorage.getItem('data')!=null){
//         var data = JSON.parse(localStorage.getItem('data'));
//         data.reverse();
//         for(i=0;i<data.length;i++){
//             var id = data[i].id;
            

//             $('#row_wishlist').append('<div class="row col-md-4 item"><div class="col-md-12"><a type="button" data-id="'+id+'" name="delete_withlist" class="delete_withlist"><i class="fas fa-heart"></i></a></div><div class="col-md-6"><img width="100%" src="'+image+'"></div><div class="col-md-6 info_wishlist"><p>'+name+'</p><p style="color:#FE980F">'+price+'</p><p><a href="'+url+'">Xem sản phẩm</a></p></div></div>');

//         }
//     }
// }
views();
function add_wistlist(clicked_id){
    var id = clicked_id;
    var name = document.getElementById('wishlist_productname'+id).value;
    var price = document.getElementById('wishlist_productprice'+id).value;
    var image = document.getElementById('wishlist_productimage'+id).src;
    var url = document.getElementById('wishlist_producturl'+id).href;
    var newItem = {
        'url':url,
        'id' :id,
        'name': name,
        'price': price,
        'image': image
    }
    if(localStorage.getItem('data')==null){
    localStorage.setItem('data', '[]');
    
    }
    var old_data = JSON.parse(localStorage.getItem('data'));
    var matches = $.grep(old_data, function(obj){
        return obj.id == id;
    })

    if(matches.length){
        alert('Sản phẩm đã tồn tại trong yêu thích.');
    }else{
        old_data.push(newItem);

    $('#row_wishlist').append('<div class="row col-md-4 item"><div class="col-md-12"><a type="button" data-id="'+newItem.id+'" name="delete_withlist" class="delete_withlist"><i class="fas fa-heart"></i></a></div><div class="col-md-6"><img width="100%" src="'+newItem.image+'"></div><div class="col-md-6 info_wishlist"><p>'+newItem.name+'</p><p style="color:#FE980F">'+newItem.price+'</p><p><a href="'+url+'">Xem sản phẩm</a></p></div></div>');

    alert('Đã thêm vào danh sách yêu thích.');
    }
    localStorage.setItem('data', JSON.stringify(old_data));
    
}